<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Send Email :: Automatiko</title>
    <link rel="canonical" href="https://docs.automatiko.io/main/0.43.0/services/email.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R2G3H6TJRK"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-R2G3H6TJRK')</script>
    <link rel="icon" href="../../../_/img/automatiko-logo-circle.png" type="image/png">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.automatiko.io"><img src="../../../_/img/automatiko-logo-circle.png" width="52px"/>Automatiko</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/automatiko-io">Souce code</a>
            <a class="navbar-item" href="https://github.com/automatiko-io/automatiko-engine/issues">Issues</a>
            <a class="navbar-item" href="https://github.com/automatiko-io/automatiko-engine/blob/master/CONTRIBUTING.md">Contribution</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="main" data-version="0.37.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Automatiko Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../about.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../concepts.html">Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../workflow-service.html">Workflow as a service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../workflow-function.html">Workflow as a function</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../workflow-function-flow.html">Workflow as a function flow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../use-cases.html">Use cases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started-bpmn.html">Based on BPMN2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started-sw.html">Based on Serverless Workflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started-code.html">Based on Java DSL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../best-practice.html">Best practice</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../service-interfaces.html">Service interface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/messaging.html">Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/persistence.html">Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/service-invocation.html">Service invocation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/errors.html">Error handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/management.html">Process management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/event-publishers.html">Event publishers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/user-tasks.html">User tasks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/async-execution.html">Async Execution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/files.html">Handling files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../components/audit.html">Audit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../configuration.html">Configuration reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="archive.html">Archive</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="email.html">Send Email</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="receive-email.html">Receive Email</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration-guide/0.30.0.html">0.30.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration-guide/0.16.0.html">0.16.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration-guide/0.13.0.html">0.13.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration-guide/0.11.0.html">0.11.0</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Automatiko Documentation</span>
    <span class="version">0.37.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Automatiko Documentation</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../0.43.0/about.html">0.43.0</a>
        </li>
        <li class="version">
          <a href="../../0.42.2/about.html">0.42.2</a>
        </li>
        <li class="version">
          <a href="../../0.42.1/about.html">0.42.1</a>
        </li>
        <li class="version">
          <a href="../../0.42.0/about.html">0.42.0</a>
        </li>
        <li class="version">
          <a href="../../0.41.0/about.html">0.41.0</a>
        </li>
        <li class="version">
          <a href="../../0.40.0/about.html">0.40.0</a>
        </li>
        <li class="version">
          <a href="../../0.39.2/about.html">0.39.2</a>
        </li>
        <li class="version">
          <a href="../../0.39.1/about.html">0.39.1</a>
        </li>
        <li class="version">
          <a href="../../0.39.0/about.html">0.39.0</a>
        </li>
        <li class="version">
          <a href="../../0.38.0/about.html">0.38.0</a>
        </li>
        <li class="version is-current">
          <a href="../about.html">0.37.0</a>
        </li>
        <li class="version">
          <a href="../../0.36.0/about.html">0.36.0</a>
        </li>
        <li class="version">
          <a href="../../0.35.0/about.html">0.35.0</a>
        </li>
        <li class="version">
          <a href="../../0.34.0/about.html">0.34.0</a>
        </li>
        <li class="version">
          <a href="../../0.33.0/about.html">0.33.0</a>
        </li>
        <li class="version">
          <a href="../../0.32.0/about.html">0.32.0</a>
        </li>
        <li class="version">
          <a href="../../0.31.0/about.html">0.31.0</a>
        </li>
        <li class="version">
          <a href="../../0.30.1/about.html">0.30.1</a>
        </li>
        <li class="version">
          <a href="../../0.30.0/about.html">0.30.0</a>
        </li>
        <li class="version">
          <a href="../../0.0.0/about.html">0.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../0.43.0/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Automatiko Documentation</a></li>
    <li>Services</li>
    <li><a href="email.html">Send Email</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.37.0</button>
  <div class="version-menu">
    <a class="version" href="../../0.43.0/services/email.html">0.43.0</a>
    <a class="version" href="../../0.42.2/services/email.html">0.42.2</a>
    <a class="version" href="../../0.42.1/services/email.html">0.42.1</a>
    <a class="version" href="../../0.42.0/services/email.html">0.42.0</a>
    <a class="version" href="../../0.41.0/services/email.html">0.41.0</a>
    <a class="version" href="../../0.40.0/services/email.html">0.40.0</a>
    <a class="version" href="../../0.39.2/services/email.html">0.39.2</a>
    <a class="version" href="../../0.39.1/services/email.html">0.39.1</a>
    <a class="version" href="../../0.39.0/services/email.html">0.39.0</a>
    <a class="version" href="../../0.38.0/services/email.html">0.38.0</a>
    <a class="version is-current" href="email.html">0.37.0</a>
    <a class="version" href="../../0.36.0/services/email.html">0.36.0</a>
    <a class="version" href="../../0.35.0/services/email.html">0.35.0</a>
    <a class="version" href="../../0.34.0/services/email.html">0.34.0</a>
    <a class="version" href="../../0.33.0/services/email.html">0.33.0</a>
    <a class="version" href="../../0.32.0/services/email.html">0.32.0</a>
    <a class="version" href="../../0.31.0/services/email.html">0.31.0</a>
    <a class="version" href="../../0.30.1/services/email.html">0.30.1</a>
    <a class="version" href="../../0.30.0/services/email.html">0.30.0</a>
    <a class="version" href="../../0.0.0/services/email.html">0.0.0</a>
  </div>
</div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Send Email</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Send Email addon service comes with support for sending emails.
It provides <code>io.automatiko.engine.addons.services.email.SendEmailService</code> that comes with
following operations</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sendSimple*</code> with given body</p>
</li>
<li>
<p><code>send*</code> with template based body</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A complete set of methods available in this service</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendSimple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send simple body email - given as parameter to main recipients only (one or more)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String tos</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String body</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendSimpleWithCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send simple body email - given as parameter to main recipients and CC recipients (one or more)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String tos</p>
</li>
<li>
<p>String ccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String body</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendSimpleWithBCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send simple body email - given as parameter to main recipients and BCC recipients (one or more)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String tos</p>
</li>
<li>
<p>String bccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String body</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendSimpleCorrelated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send simple body email - given as parameter to main recipients only (one or more) with correlation information of the workflow instance</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String correlation</p>
</li>
<li>
<p>String tos</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String body</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendSimpleCorrelatedWithCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send simple body email - given as parameter to main recipients and CC recipients (one or more) with correlation information of the workflow instance</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String correlation</p>
</li>
<li>
<p>String tos</p>
</li>
<li>
<p>String ccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String body</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendSimpleCorrelatedWithBCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send simple body email - given as parameter to main recipients and BCC recipients (one or more) with correlation information of the workflow instance</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String correlation</p>
</li>
<li>
<p>String tos</p>
</li>
<li>
<p>String bccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String body</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">send</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send generated body (based on template and data) email to main recipients only (one or more)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String tos</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String template</p>
</li>
<li>
<p>Object data</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendWithCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send generated body (based on template and data) email to main recipients and CC recipients (one or more)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String tos</p>
</li>
<li>
<p>String ccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String template</p>
</li>
<li>
<p>Object data</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendWithBCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send generated body (based on template and data) email to main recipients and BCC recipients (one or more)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String tos</p>
</li>
<li>
<p>String bccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String template</p>
</li>
<li>
<p>Object data</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendCorrelated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send generated body (based on template and data) email to main recipients only (one or more) with correlation information of the workflow instance</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String correlation</p>
</li>
<li>
<p>String tos</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String template</p>
</li>
<li>
<p>Object data</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendCorrelatedWithCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send generated body (based on template and data) email to main recipients and CC recipients (one or more) with correlation information of the workflow instance</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String correlation</p>
</li>
<li>
<p>String tos</p>
</li>
<li>
<p>String ccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String template</p>
</li>
<li>
<p>Object data</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sendCorrelatedWithBCC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to send generated body (based on template and data) email to main recipients and BCC recipients (one or more) with correlation information of the workflow instance</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>String correlation</p>
</li>
<li>
<p>String tos</p>
</li>
<li>
<p>String bccs</p>
</li>
<li>
<p>String subject</p>
</li>
<li>
<p>String template</p>
</li>
<li>
<p>Object data</p>
</li>
<li>
<p>File&lt;byte[]&gt;&#8230;&#8203; attachments</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When using correlated email send operations to pass in the correlation you can use <code>#{processInstanceId}</code> expression
in the data mapping. You can also use values that match any of the tags of the workflow instance.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Regardless of the operation type, recipients (both <code>TO</code> and <code>CC</code> or <code>BCC</code>) can be given as list of comma
separated addresses e.g. <code>john@email.com,<a href="mailto:mary@email.com">mary@email.com</a></code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_send_with_given_body_operation"><a class="anchor" href="#_send_with_given_body_operation"></a>Send with given body operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Send email with given body is based on complete body to be given to the operation
and thus it will not perform any modification to it.</p>
</div>
<div class="paragraph">
<p>There are two flavors of the operation that differs in the set of recipients
- sending only to main recipients (TO)
- sending to both main recipients and CC recipients
- sending to both main recipients and BCC recipients</p>
</div>
<div class="sect2">
<h3 id="_data_mapping"><a class="anchor" href="#_data_mapping"></a>Data mapping</h3>
<div class="paragraph">
<p>When used via service task this service expects following data mapping</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Inputs</p>
<div class="ulist">
<ul>
<li>
<p>to - one or more email addresses of recipients</p>
</li>
<li>
<p>cc - one or more CC email recipients - this can be completely omitted</p>
</li>
<li>
<p>subject - subject of the email message</p>
</li>
<li>
<p>body - complete body of the email message</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optionally as last inputs attachments can be given. There maybe 0 or more
attachments and they should be of type <code>io.automatiko.engine.api.workflow.files.File</code></p>
</div>
<div class="paragraph">
<p>There are no outputs to be defined.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_success"><a class="anchor" href="#_on_success"></a>On success</h3>
<div class="paragraph">
<p>Successful operation will not produce any results</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_failure"><a class="anchor" href="#_on_failure"></a>On failure</h3>
<div class="paragraph">
<p>Failure during creation of the archive will throw a <code>io.automatiko.engine.api.workflow.ServiceExecutionError</code>
with error code <code>sendEmailFailure</code> so it can be used within workflow definition to handle errors</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_send_with_template_based_body_operation"><a class="anchor" href="#_send_with_template_based_body_operation"></a>Send with template based body operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Send email with template based body is based on generating email body based on given template (identified
by name) and the context object. Both must be given to properly produce and send email.</p>
</div>
<div class="paragraph">
<p>There are two flavors of the operation that differs in the set of recipients
- sending only to main recipients (TO)
- sending to both main recipients and CC recipients
- sending to both main recipients and BCC recipients</p>
</div>
<div class="paragraph">
<p>When creating templates (usually html files) to refer to context object use <code>body</code> variable.
Following examples shows how to access name of the person that is given as context object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;html&gt;
  &lt;body&gt;

	&lt;h1&gt;Hello {body.name}&lt;/h1&gt;

	&lt;p&gt;Here is a bit of information for you!&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>All templates must be stored in <code>templates</code> folder under <code>src/main/resources</code> of your project.</p>
</div>
<div class="sect2">
<h3 id="_data_mapping_2"><a class="anchor" href="#_data_mapping_2"></a>Data mapping</h3>
<div class="paragraph">
<p>When used via service task this service expects following data mapping</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Inputs</p>
<div class="ulist">
<ul>
<li>
<p>to - one or more email addresses of recipients</p>
</li>
<li>
<p>cc - one or more CC email recipients - this can be completely omitted</p>
</li>
<li>
<p>subject - subject of the email message</p>
</li>
<li>
<p>template - name of the template to be used to generate email body</p>
</li>
<li>
<p>body - a context object that will be given as <code>body</code> into the template generation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optionally as last inputs attachments can be given. There maybe 0 or more
attachments and they should be of type <code>io.automatiko.engine.api.workflow.files.File</code></p>
</div>
<div class="paragraph">
<p>There are no outputs to be defined.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_success_2"><a class="anchor" href="#_on_success_2"></a>On success</h3>
<div class="paragraph">
<p>Successful operation will not produce any results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_failure_2"><a class="anchor" href="#_on_failure_2"></a>On failure</h3>
<div class="paragraph">
<p>Failure during creation of the archive will throw a <code>io.automatiko.engine.api.workflow.ServiceExecutionError</code>
with error code</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sendEmailFailure</code></p>
</li>
<li>
<p><code>emailTemplateNotFound</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>so it can be used within workflow definition to handle errors</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be able to use this service addon a project must be given following dependency</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.automatiko.addons.services&lt;/groupId&gt;
  &lt;artifactId&gt;automatiko-send-email-addon&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a need to provide email server configuration via <code>application.properties</code> file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-plain hljs" data-lang="plain">quarkus.mailer.auth-methods=DIGEST-MD5 CRAM-SHA256 CRAM-SHA1 CRAM-MD5 PLAIN LOGIN
quarkus.mailer.from=YOUR_EMAIL@gmail.com
quarkus.mailer.host=smtp.gmail.com
quarkus.mailer.port=587
quarkus.mailer.start-tls=REQUIRED
quarkus.mailer.username=YOUR_EMAIL@gmail.com
quarkus.mailer.password=PASSWORD</code></pre>
</div>
</div>
<div class="paragraph">
<p>Declare service interface</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/declare-interface.png" alt="declare interface">
</div>
</div>
<div class="paragraph">
<p>Configure service task interface</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/email-1.png" alt="email 1">
</div>
</div>
<div class="paragraph">
<p>Configure parameters to invoke (in this case the <code>send</code> operation with template names <code>notifications</code>)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/email-2.png" alt="email 2">
</div>
</div>
<div class="paragraph">
<p>In this example</p>
</div>
<div class="ulist">
<ul>
<li>
<p>email is sent to address taken from workflow instance variable called <code>email</code></p>
</li>
<li>
<p>with subject set to <code>Notifications</code></p>
</li>
<li>
<p>body is generated based on template named <code>notifications</code> and the <code>person</code> workflow instance variable is given as context to template generation</p>
</li>
<li>
<p><code>documents</code> workflow instance variable is used as attachment to the email (in this case a <code>zip</code> file)</p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p class="text-center">Â© 2020 Automatiko. All rights reserved.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
