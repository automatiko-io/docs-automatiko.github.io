<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Concepts :: Automatiko</title>
    <link rel="canonical" href="https://docs.automatiko.io/main/0.34.0/concepts.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R2G3H6TJRK"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-R2G3H6TJRK')</script>
    <link rel="icon" href="../../_/img/automatiko-logo-circle.png" type="image/png">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.automatiko.io"><img src="../../_/img/automatiko-logo-circle.png" width="52px"/>Automatiko</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/automatiko-io">Souce code</a>
            <a class="navbar-item" href="https://github.com/automatiko-io/automatiko-engine/issues">Issues</a>
            <a class="navbar-item" href="https://github.com/automatiko-io/automatiko-engine/blob/master/CONTRIBUTING.md">Contribution</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="main" data-version="0.34.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">Automatiko Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="about.html">About</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="concepts.html">Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="workflow-service.html">Workflow as a service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="workflow-function.html">Workflow as a function</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="workflow-function-flow.html">Workflow as a function flow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="use-cases.html">Use cases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started-bpmn.html">Based on BPMN2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started-sw.html">Based on Serverless Workflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started-code.html">Based on Java DSL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="best-practice.html">Best practice</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="service-interfaces.html">Service interface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/messaging.html">Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/persistence.html">Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/service-invocation.html">Service invocation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/errors.html">Error handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/management.html">Process management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/event-publishers.html">Event publishers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/user-tasks.html">User tasks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/async-execution.html">Async Execution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/files.html">Handling files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="components/audit.html">Audit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configuration.html">Configuration reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services/archive.html">Archive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services/email.html">Send Email</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="services/receive-email.html">Receive Email</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration-guide/0.30.0.html">0.30.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration-guide/0.16.0.html">0.16.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration-guide/0.13.0.html">0.13.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration-guide/0.11.0.html">0.11.0</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Automatiko Documentation</span>
    <span class="version">0.34.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Automatiko Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="about.html">0.34.0</a>
        </li>
        <li class="version">
          <a href="../0.33.0/about.html">0.33.0</a>
        </li>
        <li class="version">
          <a href="../0.32.0/about.html">0.32.0</a>
        </li>
        <li class="version">
          <a href="../0.31.0/about.html">0.31.0</a>
        </li>
        <li class="version">
          <a href="../0.30.1/about.html">0.30.1</a>
        </li>
        <li class="version">
          <a href="../0.30.0/about.html">0.30.0</a>
        </li>
        <li class="version">
          <a href="../0.23.0/about.html">0.23.0</a>
        </li>
        <li class="version">
          <a href="../0.22.0/about.html">0.22.0</a>
        </li>
        <li class="version">
          <a href="../0.21.0/about.html">0.21.0</a>
        </li>
        <li class="version">
          <a href="../0.20.0/about.html">0.20.0</a>
        </li>
        <li class="version">
          <a href="../0.19.0/about.html">0.19.0</a>
        </li>
        <li class="version">
          <a href="../0.18.0/about.html">0.18.0</a>
        </li>
        <li class="version">
          <a href="../0.17.0/about.html">0.17.0</a>
        </li>
        <li class="version">
          <a href="../0.16.0/about.html">0.16.0</a>
        </li>
        <li class="version">
          <a href="../0.15.0/about.html">0.15.0</a>
        </li>
        <li class="version">
          <a href="../0.14.0/about.html">0.14.0</a>
        </li>
        <li class="version">
          <a href="../0.13.0/about.html">0.13.0</a>
        </li>
        <li class="version">
          <a href="../0.12.0/about.html">0.12.0</a>
        </li>
        <li class="version">
          <a href="../0.11.0/about.html">0.11.0</a>
        </li>
        <li class="version">
          <a href="../0.10.0/about.html">0.10.0</a>
        </li>
        <li class="version">
          <a href="../0.9.0/about.html">0.9.0</a>
        </li>
        <li class="version">
          <a href="../0.8.0/about.html">0.8.0</a>
        </li>
        <li class="version">
          <a href="../0.7.0/about.html">0.7.0</a>
        </li>
        <li class="version">
          <a href="../0.6.0/about.html">0.6.0</a>
        </li>
        <li class="version">
          <a href="../0.5.0/about.html">0.5.0</a>
        </li>
        <li class="version">
          <a href="../0.4.0/about.html">0.4.0</a>
        </li>
        <li class="version">
          <a href="../0.3.0/about.html">0.3.0</a>
        </li>
        <li class="version">
          <a href="../0.2.0/about.html">0.2.0</a>
        </li>
        <li class="version">
          <a href="../0.1.0/about.html">0.1.0</a>
        </li>
        <li class="version">
          <a href="../0.0.0/about.html">0.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">Automatiko Documentation</a></li>
    <li><a href="concepts.html">Concepts</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.34.0</button>
  <div class="version-menu">
    <a class="version is-current" href="concepts.html">0.34.0</a>
    <a class="version" href="../0.33.0/concepts.html">0.33.0</a>
    <a class="version" href="../0.32.0/concepts.html">0.32.0</a>
    <a class="version" href="../0.31.0/concepts.html">0.31.0</a>
    <a class="version" href="../0.30.1/concepts.html">0.30.1</a>
    <a class="version" href="../0.30.0/concepts.html">0.30.0</a>
    <a class="version" href="../0.23.0/concepts.html">0.23.0</a>
    <a class="version" href="../0.22.0/concepts.html">0.22.0</a>
    <a class="version" href="../0.21.0/concepts.html">0.21.0</a>
    <a class="version" href="../0.20.0/concepts.html">0.20.0</a>
    <a class="version" href="../0.19.0/concepts.html">0.19.0</a>
    <a class="version" href="../0.18.0/concepts.html">0.18.0</a>
    <a class="version" href="../0.17.0/concepts.html">0.17.0</a>
    <a class="version" href="../0.16.0/concepts.html">0.16.0</a>
    <a class="version" href="../0.15.0/concepts.html">0.15.0</a>
    <a class="version" href="../0.14.0/concepts.html">0.14.0</a>
    <a class="version" href="../0.13.0/concepts.html">0.13.0</a>
    <a class="version" href="../0.12.0/concepts.html">0.12.0</a>
    <a class="version" href="../0.11.0/concepts.html">0.11.0</a>
    <a class="version" href="../0.10.0/concepts.html">0.10.0</a>
    <a class="version" href="../0.9.0/concepts.html">0.9.0</a>
    <a class="version" href="../0.8.0/concepts.html">0.8.0</a>
    <a class="version" href="../0.7.0/concepts.html">0.7.0</a>
    <a class="version" href="../0.6.0/concepts.html">0.6.0</a>
    <a class="version" href="../0.5.0/concepts.html">0.5.0</a>
    <a class="version" href="../0.4.0/concepts.html">0.4.0</a>
    <a class="version" href="../0.3.0/concepts.html">0.3.0</a>
    <a class="version" href="../0.2.0/concepts.html">0.2.0</a>
    <a class="version" href="../0.1.0/concepts.html">0.1.0</a>
    <a class="version" href="../0.0.0/concepts.html">0.0.0</a>
  </div>
</div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Concepts</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Automatiko is based on the concept of modeling business logic and decisions to capture
and express business requirements. It is all about using this model to understand and
explain what the service is about.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workflow"><a class="anchor" href="#_workflow"></a>Workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflow (aka process) is the main entry point of the service or function. Depending on the language,
a workflow can be expressed either as flow chart (in case of BPMN2), or a text-based format
(JSON or YAML in case of Serverless Workflow).</p>
</div>
<div class="paragraph">
<p>A workflow consists of activities that are executed within the life time of each of its instances.
These activities have different meaning depending of their type or place
in the workflow model, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Activities</strong> that invoke services
(<em>'service task'</em> in BPMN or <em>'operation state'</em> in Serverless Workflow)</p>
</li>
<li>
<p><strong>Events</strong> that either capture events or produce events</p>
</li>
<li>
<p><strong>Subworkflows</strong> that creates new workflow instance of another workflow to build
hierarchy of workflow instances and take advantage of <strong>workflow composition</strong> pattern
(<em>'call activity or reusable subworkflow'</em> in BPMN or <em>'subflow state'</em> in Serverless Workflow)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Automatiko comes with following approaches to use workflows</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Workflow as a service</p>
</li>
<li>
<p>Workflow as a function</p>
</li>
<li>
<p>Workflow as a function flow</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_identification_and_description"><a class="anchor" href="#_identification_and_description"></a>Identification and description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A workflow must include an assigned id. The id serves as an unique workflow identifier and as such should be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>short (typically a single word, or a compound word using the CamelCase naming convention)</p>
</li>
<li>
<p>descriptive (carry only the most important information)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The reason why these rules are describe is that the workflow id here is again used as your service identification
parameter. With that said, it will be the top level resource of the workflow REST API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Best practice is to think about workflow id in context of its domain. For example the id of a workflow managing orders should be <strong>orders</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition to the id, a workflow also contains a name that should be provided
and include a  description of the logic encapsulated by the workflow definition.
It should however not be too long as workflow allows you to define extra
documentation on various other levels such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the workflow itself</p>
</li>
<li>
<p>every workflow activity</p>
</li>
<li>
<p>every data object (a.k.a. variable) in the workflow</p>
</li>
<li>
<p>every event defined in the workflow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using documentation is recommended as it automatically enhances the service description.
This allows service consumers to better understand the overall intention of the service
which can aid with their integration efforts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_versioning"><a class="anchor" href="#_versioning"></a>Versioning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Versioning of a workflow should be considered from the very beginning as it might have
severe impacts on service consumers and its maintainability.</p>
</div>
<div class="paragraph">
<p>Following are the basic principles to how to handle versioning in Automatiko:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a version can be assigned to any workflow (public and private)</p>
</li>
<li>
<p>version will be part of the service contract - in REST api it will prefix the paths
e.g. <code>/v1/orders</code> or <code>/v1_2/orders</code> for versions <code>1</code> and <code>1.2</code> respectively.</p>
</li>
<li>
<p>multiple versions of the workflow should be kept in the same service, meaning a new version
should be a copy of the previous one</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Change the version only when there is good reason for it. As a rule of thumb it is
 recommended to not change the workflow version if the change is backward compatible.
 In other words, change the version only when the modifications to the workflow make the
 existing instances impossible to continue.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, service can be configured to route unversioned requests to latest version or to the version
 given instance belongs to. Let&#8217;s look at an example:</p>
</div>
<div class="paragraph">
<p>There are following workflow definitions in the service:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>orders</code> with version <code>1</code></p>
</li>
<li>
<p><code>orders</code> with version <code>2</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These workflow definitions are then exposed via service interface with following endpoints</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/v1/orders</code> for version 1</p>
</li>
<li>
<p><code>/v2/orders</code> for version 2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So when consumers of this service interact with it they need to take the decision which version they
want to use. In many cases that is expected and explicit decision on which version shall be used is
desired. Though there are also cases when consumers should be unaware of the versions and by that could benefit
simplified usage pattern.</p>
</div>
<div class="paragraph">
<p>To make this happen, service can be configured with <code>service-route-to-latest</code> feature that will make this happen
so consumers could use the <code>/orders</code> endpoint - without the version prefix.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When requests are made with instance id they are routed to the version they belong to instead of the latest.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To make use of the routing following property needs to be set:
<code>quarkus.automatiko.service-route-to-latest=true</code> inside the <code>application.properties</code> file or via variables (env etc)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_types_of_workflows"><a class="anchor" href="#_types_of_workflows"></a>Types of workflows</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
workflow types are currently only supported in BPMN language and not in Serverless Workflow.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Workflow types defines the visibility of given workflow on the service API. There are two
types of workflows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Public</strong> - exposed as top level service endpoints</p>
</li>
<li>
<p><strong>Private</strong> - hidden from the service API, meaning instances of such workflows cannot
be started from outside.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Private workflows provide a perfect fit for subworkflows. This allows you to limit the creation of new instances
of subworkflows only to their, so called, owning workflow instance.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workflow_custom_attributes"><a class="anchor" href="#_workflow_custom_attributes"></a>Workflow custom attributes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflow allows to specify additional information (that in some cases have impact on execution) via custom
attributes. These attributes are specified as properties of the workflow (BPMN) or metadata (Serverless Workflow).</p>
</div>
<div class="paragraph">
<p>Following is a list of available custom attributes currently supported</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attribute name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional description of the process instance that can reference data objects (variables) of the instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accessPolicy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access policy to be set for process instances (see security for more details)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>participants</code> or <code>initiator</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expiresAfter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an ISO based duration (e.g. P10D) expression that will set expiration date upon instance completion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execution timeout in ISO based duration (e.g. PT1H) that is the maximum duration of the instance being active</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_workflow_data"><a class="anchor" href="#_workflow_data"></a>Workflow data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflow data defines the actual domain of the service that is being modeled.
In the end, all services are meant to deal with data and as such alter it.</p>
</div>
<div class="paragraph">
<p>Properly defining the workflow data model is extremely important to the service and the
contract it will expose. To help with that, Automatiko promotes the use of so called <strong>tags</strong> to
annotate and enhance data handling.</p>
</div>
<div class="sect2">
<h3 id="_data_object_tags"><a class="anchor" href="#_data_object_tags"></a>Data object tags</h3>
<div class="paragraph">
<p>Workflow data, also known as <strong>data objects</strong> or <strong>variables</strong>, can be annotated with tags to
enable additional features:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">input</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as input that should be available upon starting a new instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as output that will be always returned when an instance is altered or is completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">internal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as internal, meaning it not be visible from the outside</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sensitive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as sensitive, meaning it not be visible from the outside and is not published via events</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">notnull</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as non-nullable, meaning once it was assigned a value it cannot be reset to null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readonly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as read only, meaning that it cannot be changed after being set once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as required to start new instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto-initialized</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object to be auto initialized upon start, meaning
it guarantees that the value will be set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">business-key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object to be used as a business key of the instance. Applies only for
the start of a new instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">initiator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object to be the source of initiator of the instance instead of
relying on security context</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">versioned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object to be versioned. Each change to the variable records the previous one and makes it available
to be fetched with construct <code>variablename$VERSION</code> for example <code>person$3</code> will get the version 3 of the person variable.
Note that versions start at 0. <code>person$</code> will return list of all versions of the variable and <code>person$-1</code> will return the
last version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transient</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marks a given data object as transient meaning it will never be persisted and by that will not retain the value (will always
have null value on reload of the instance from data store)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Serverless Workflow does not define data objects explicitly and allows to have data pushed on demand and thus
do not make use of tags.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_workflow_instance"><a class="anchor" href="#_workflow_instance"></a>Workflow instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflow instance is an individual instance of a given workflow. This is a runtime
representation of a single execution according to given workflow definition.</p>
</div>
<div class="paragraph">
<p>Depending on the workflow definition (how it was modeled), a workflow instance can be short lived or
it can span hours, days, months and more.</p>
</div>
<div class="paragraph">
<p>Each workflow instance is uniquely identified with generate id (of a form of UUID).
This id remains unchanged during the entire life time of the instance.</p>
</div>
<div class="sect2">
<h3 id="_business_key"><a class="anchor" href="#_business_key"></a>Business key</h3>
<div class="paragraph">
<p>Business key can provide an alternative to the workflow instance id. Similarly to the id, a business
key, when assigned, remains unchaged during the entire live-time of the workflow instance.
A business key can be used exactly as id and can be used to reference a given instance from the outside
via service API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Even though business key is assigned the generated id can still be used to
reference the instance.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Business key must be unique within the scope of a workflow (or version of the workflow).
That means you can have only one active instance with a given business key.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_execution_timeout"><a class="anchor" href="#_execution_timeout"></a>Execution timeout</h3>
<div class="paragraph">
<p>Execution timeout of an instance can be defined within the workflow definition as part of custom attributes.
It allows to specify the maximum amount of time (since the start) that workflow instance is allowed to
remain active. It is given as a ISO formatted duration <code>PT5H</code>, <code>P5D</code> (5 hours and 5 days respectively).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To define it add <code>timeout</code> custom attribute on the workflow definition with desired duration
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_end_of_instance_strategy"><a class="anchor" href="#_end_of_instance_strategy"></a>End of instance strategy</h3>
<div class="paragraph">
<p>When workflow instance reaches its end (either by completing successfully or by being aborted) there might be
 situations that requires it be handled in one way or another. For this exact purpose, end of instance
 strategies are provided. These allow to have different behavior depending on your needs.
 For example due to legal requirements instances must be kept for given amount of time, or they should
 be archived to another location for reference.</p>
</div>
<div class="paragraph">
<p>Automatiko provides three out of the box strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>remove</p>
</li>
<li>
<p>keep</p>
</li>
<li>
<p>archive</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_remove"><a class="anchor" href="#_remove"></a>Remove</h4>
<div class="paragraph">
<p>Remove strategy is the default one that simply removes the workflow instance from the data store. That
operation is permanent and by that means the information about the workflow instance (including
its data) are gone.</p>
</div>
<div class="paragraph">
<p>This strategy helps at keeping the storage to minimum size by holding only instances that are not yet finished.</p>
</div>
<div class="paragraph">
<p>Configuration of this strategy</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property name</th>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.automatiko.on-instance-end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUARKUS_AUTOMATIKO_ON_INSTANCE_END</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_keep"><a class="anchor" href="#_keep"></a>Keep</h4>
<div class="paragraph">
<p>Keep strategy is the opposite of remove, it will update the status and its content and keep the workflow
instance in the data store. That will allow to access completed and aborted instances at any time,
including their data and complete execution path that can also be visualized on the workflow definition
image.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Keep strategy comes with limitation that does not allow to reuse the same identifiers of workflow
instances. In most of the cases this is not an issue as identifiers are generated. The situation when
this can manifest itself is when workflow instances uses business keys. These are considered alternative
identifiers and by that cannot be reused.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configuration of this strategy</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property name</th>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.automatiko.on-instance-end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUARKUS_AUTOMATIKO_ON_INSTANCE_END</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">keep</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_archive"><a class="anchor" href="#_archive"></a>Archive</h4>
<div class="paragraph">
<p>Archive strategy allows to automatically extract complete set of information about workflow instance
at its completion. That data are then exported into an archive (zip file) that consists of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>process instance export format</p>
</li>
<li>
<p>each variable as separate file (regular variables as json documents, files as dedicated files with proper extensions)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Archives are by default stored on file system so extra configuration property is required. Although this
is also extensible and custom implementations of <code>io.automatiko.engine.api.workflow.ArchiveStore</code>
can be provided that will be used to store the produced archive.</p>
</div>
<div class="paragraph">
<p>Archives will be stored in the given directory grouped in folders named based on workflow definition
id and version. Each archive will be named like <code>{workflow-instance-id}.zip</code> where <code>{workflow-instance-id}</code>
is going to be replaced with actual id of the workflow instance.</p>
</div>
<div class="paragraph">
<p>Configuration of this strategy</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property name</th>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.automatiko.on-instance-end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUARKUS_AUTOMATIKO_ON_INSTANCE_END</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">archive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.automatiko.archive-path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUARKUS_AUTOMATIKO_ARCHIVE_PATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/my/custom/archive/folder</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tags"><a class="anchor" href="#_tags"></a>Tags</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Similar to workflow data tags, a workflow itself can define tags. Tags allow you to put extra
information (in addition to a business key) used for correlation purpose.</p>
</div>
<div class="paragraph">
<p>Tags can be both simple (constant) values that won&#8217;t change over time or expressions
that are evaluated every time a workflow instance changes.</p>
</div>
<div class="paragraph">
<p>Additional feature of workflow tags (compared to workflow data tags) is that tags can be
added and removed during the entire life time of a workflow instance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Tags defined in a workflow (definition) cannot be removed. Only tags added on top
of active workflow instance can.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_decisions"><a class="anchor" href="#_decisions"></a>Decisions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Decisions are used to capture the workflow decision logic. They are not exposed
as a separate services but instead are invoked from within a workflow. Decisions in Automatiko
are defined as DMN diagrams which goes hand in hand with BPMN to have both defined in a graphical
way.</p>
</div>
<div class="paragraph">
<p>Best practices to properly integrate decisions include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>decisions should be identified by <code>model</code> and <code>namespace</code> and optionally <code>decision</code> or <code>decision service</code></p>
</li>
<li>
<p>decisions must define inputs which will then be mapped from the workflow data</p>
</li>
<li>
<p>decisions define various decision logic constructs such as</p>
<div class="ulist">
<ul>
<li>
<p>literal expression to encapsulate expression like decisions</p>
</li>
<li>
<p>decision tables</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Decision results are then mapped (by name) to workflow data.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p class="text-center">Â© 2020 Automatiko. All rights reserved.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
