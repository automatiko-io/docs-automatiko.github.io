<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Best Practice :: Automatiko</title>
    <link rel="canonical" href="https://docs.automatiko.io/component-main/0.0.0/best-practice.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.automatiko.io">Automatiko</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/automatiko-io">Souce code</a>
            <a class="navbar-item" href="https://github.com/automatiko-io/automatiko-engine/issues">Issues</a>
            <a class="navbar-item" href="https://github.com/automatiko-io/automatiko-engine/blob/master/CONTRIBUTING.md">Contribution</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="component-main" data-version="0.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">Automatiko Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="about.html">About</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="concepts.html">Concepts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="use-cases.html">Use cases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="examples.html">Examples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting-started.html">Getting started</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="best-practice.html">Best practice</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How tos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="howtos/security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="howtos/messaging.html">Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="howtos/persistence.html">Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="howtos/addons.html">Addons</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configuration.html">Configuration reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Automatiko Documentation</span>
    <span class="version">0.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Automatiko Documentation</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="about.html">0.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">Automatiko Documentation</a></li>
    <li><a href="best-practice.html">Best practice</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Best Practice</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Following are set of good practices to be applied when building solution with
Automatiko. These are not meant to be "one size fits all" but more of a
guideline on items to take into consideration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_short_descriptive_workflow_id"><a class="anchor" href="#_use_short_descriptive_workflow_id"></a>Use short descriptive workflow id</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflows must be identified with a descriptive id which is then used as service
endpoint. So keeping it as short (usually one or two words) and as descriptive
 is one of the most important practices. For example if a workflow is about
 managing orders the <code>orders</code> would be a good id of the workflow.</p>
</div>
<div class="paragraph">
<p>On the other hand workflow name can be more descriptive and does not have to be
that short.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_define_visibility_of_workflows"><a class="anchor" href="#_define_visibility_of_workflows"></a>Define visibility of workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflows by default are public. That means they will represent a service
endpoint. There will be situations where not all workflows should be instantiated
from outside. In such cases workflows should set the <code>processType</code> to a <code>private</code>
type to make sure this won&#8217;t be exposed as service endpoint that can create
new instances.</p>
</div>
<div class="paragraph">
<p>A common case for this is when workflows are used as subworkflows (Call activity
  in BPMN terminology). The top level workflow is marked as <code>public</code> while all
  sub workflows are marked as <code>private</code> and thus can be only instantiated from within
  the service and not from calling requests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_versioning_wisely"><a class="anchor" href="#_use_versioning_wisely"></a>Use versioning wisely</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Automatiko supports workflow versioning which in turn will created versioned
service api</p>
</div>
<div class="paragraph">
<p>For workflow that has version set to <code>1.0</code> and id <code>orders</code> will create a
service api with following endpoints</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/v1_0/orders</code></p>
</li>
<li>
<p><code>/v1_0/orders/{id}</code></p>
</li>
<li>
<p>&#8230;&#8203;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Important good practice is when using versions, change the version only when
introducing backward incompatible changes. That will make maintenance of
service way easier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_workflows"><a class="anchor" href="#_document_workflows"></a>Document workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>BPMN allows to document pretty much any element of the workflow. Though documentation
is important it is not to document every single element of the process.
Instead document the most important parts that will be then documentation
of the service API. This includes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>documentation on the workflow level</p>
</li>
<li>
<p>documentation of data objects</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Having these two always documented will make your service api way more descriptive.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_business_keys_if_possible"><a class="anchor" href="#_use_business_keys_if_possible"></a>Use business keys if possible</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Business key is an alternative identifier of the instance. Instead of having
a generated id business key can be used to provide more meaningful identification.</p>
</div>
<div class="paragraph">
<p>It&#8217;s recommended to use business key whenever possible as it</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is more domain specific such as order number or employee id</p>
</li>
<li>
<p>is unique same as generated id</p>
</li>
<li>
<p>can be used directly on service api</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Business key can also be used for subworkflows but must be taken from
workflow data
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_define_workflow_tags"><a class="anchor" href="#_define_workflow_tags"></a>Define workflow tags</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Workflow tags allow to define custom values (or expressions) that will be attached
to every instance of the workflow. Tags are used not just for improved visibility
but also for correlation. Workflow instances can be correlated by id or one of the
tags.</p>
</div>
<div class="paragraph">
<p>Defining tags are a good practice to enable advanced use cases such as matching
instances by multiple values.</p>
</div>
<div class="paragraph">
<p>A common case is to add extra correlations on top of business key described above.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_describe_intention_of_workflow_data"><a class="anchor" href="#_describe_intention_of_workflow_data"></a>Describe intention of workflow data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Similar to workflow tags, workflow data can also have tags. These are more to
express the intention for given data object. There are number of predefined tags
that are described <a href="concepts.html#_process_data">here</a>.</p>
</div>
<div class="paragraph">
<p>One of the most commonly used is to mark given data object as input or output
which will be expressed on the service api.</p>
</div>
<div class="paragraph">
<p>Other useful tags are</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>business-key</strong></p>
</li>
<li>
<p><strong>initiator</strong> - so called owner of the instance used for security checks</p>
</li>
<li>
<p><strong>auto-initialized</strong></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_secure_access_to_workflows"><a class="anchor" href="#_secure_access_to_workflows"></a>Secure access to workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Security is one of the aspects that should be taken at the beginning. Automatiko
comes with two levels of security</p>
</div>
<div class="ulist">
<ul>
<li>
<p>service level security</p>
</li>
<li>
<p>instance level security</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_service_level_security"><a class="anchor" href="#_service_level_security"></a>Service level security</h3>
<div class="paragraph">
<p>Service level security is enforcing role based access to the service api.
That means that anyone who has a particular role will be able to access
service endpoints. This is sort of standard web layer security.</p>
</div>
</div>
<div class="sect2">
<h3 id="_instance_level_security"><a class="anchor" href="#_instance_level_security"></a>Instance level security</h3>
<div class="paragraph">
<p>On the other hand, instance level security has additional checks that
not only verify the roles but also based on used <code>access policy</code> verifies
if given user has access to perform particular operation. Instance level security
is pluggable and comes with three access policies out of the box</p>
</div>
<div class="ulist">
<ul>
<li>
<p>permit all - default policy if no other has been set</p>
</li>
<li>
<p>participants - policy that allows to perform any operation for initiator (owner)
and any user that has currently user tasks assigned.</p>
</li>
<li>
<p>initiator - similar to <code>participants</code> but updating instance data or deleting instance
is available for initiator (owner) only</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With that said, it&#8217;s recommended that security is applied with on service level
or both service and instance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_process_composition"><a class="anchor" href="#_use_process_composition"></a>Use process composition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Process composition is a fancy name for breaking your workflows into smaller
sets. That is to have well defined entry point (public workflow) and then
set of private workflows that are specialized for dealing with part of the
business problem.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_functions_for_custom_logic"><a class="anchor" href="#_use_functions_for_custom_logic"></a>Use "Functions" for custom logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Automatiko comes with a <code>Functions</code> interface that is meant to simplify
custom logic that needs to be used as part of workflow execution.
Most common use case for it is conditions - there might be as simple as
<code>a.equals(b)</code> kind of conditions but in real projects it&#8217;s not that simple.</p>
</div>
<div class="paragraph">
<p>So instead of having this logic embedded in the workflow definition it&#8217;s
recommended to create a functions class that will come with this extra logic
and just reference the functions from workflow definitions.</p>
</div>
<div class="paragraph">
<p>Here is an example of a simple functions implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.automatiko.engine.api.Functions;

public class VacationFunctions implements Functions {

    public static boolean isNotEligible(Request request, Vacation vacation) {
        if (vacation.eligible.intValue() &lt;= request.length + vacation.used) {
            return true;
        }

        return false;
    }

    public static String vacationUsed(Vacation vacation) {
        return "Used days " + vacation.used;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_your_workflows"><a class="anchor" href="#_test_your_workflows"></a>Test your workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Automatiko comes with rather good test support so there is no excuse to
not test your workflows. Regardless if the workflow is simple or complex
having a good test coverage is certainly a good practice.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
